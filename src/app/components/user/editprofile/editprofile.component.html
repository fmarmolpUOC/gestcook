<section>
    <div class="bd-example-container-body">
        <div class="row">
            <div class="col-md-6">
                <a routerLink="/profile" class="btn btn-link">
                    <i class="fa fa-arrow-circle-o-left"></i>Atrás
                </a>
            </div>
        </div>



        <div class="row justify-content-md-center">
            <div class="card-wrapper">
                <div class="brand text-center bg-primary"><img src="assets\icons\Logo_llarg_b&w.png"></div>
                <div class="card ">
                    <div class="card-body">

                        <form #formRegister="ngForm" (submit)="onClickUpdate(formRegister)">
                            <h4 class="card-title">Editar perfil de usuario</h4>
                            <small>({{usr.email}})</small>
                            <div class="alert alert-dismissible alert-danger" role="alert" *ngIf="error ">{{error}}</div>
                            <!--
                            <div class="form-group">
                                <label for="email">Correo electrónico</label>
                                <input [(ngModel)]="user.email" type="email" id="email " class="form-control" name="email" placeholder="Correo electrónico" autofocus required>
                            </div>

                            <div class="form-group ">
                                <label for="password">Contraseña</label>
                                <show-hide-password size="sm" icon="fontawesome" btnStyle="primary" [btnOutline]="false">
                                    <input [(ngModel)]="password" type="password" name="password" class="form-control" placeholder="Contraseña" id="password" minlength="6" required>
                                </show-hide-password>
                            </div>
                            -->
                            <div class="form-group">
                                <br>
                                <h5>Imagen perfil:</h5>
                                <img class="imgProfile" *ngIf="urlImage | async; else actualImage" [src]="url">
                                <br>
                                <input type="file" accept=".png, .jpg" (change)=" onUpload($event); onSelectFile($event)">
                                <ng-template #actualImage>
                                    <img class="imgProfile" src="{{usr.photoUrl}}" alt="Card image">
                                </ng-template>
                            </div>
                            <div class="progress">
                                <ng-template #charging>
                                    <div [style.visibility]="(uploadPercent == 0) ? 'hidden' : 'visible'" class="progress-bar progress-bar-striped progress-bar-animated" role="progressbar" aria-valuemin="0" aria-valuemax="100" [style.width]="(uploadPercent | async) +'%'">
                                    </div>
                                </ng-template>
                                <div *ngIf="urlImage | async; else charging" [style.visibility]="(uploadPercent == 100) ? 'hidden' : 'visible'" class="progress-bar progress-bar-striped bg-success" role="progressbar" aria-valuemin="0" aria-valuemax="100" style="width: 100%" aria-valuenow="100">
                                    <span class="progressText" *ngIf="urlImage | async">100%</span>
                                </div>
                            </div>
                            <input #imageUser *ngIf="urlImage | async; else sameImage" type="hidden" [value]="urlImage | async">
                            <ng-template #sameImage>
                                <input #imageUser type="hidden" [value]="usr.photoUrl">
                            </ng-template>

                            <ul class="list-group list-group-flush">
                                <li class="list-group-item">
                                    <label for="titulo"><h5>Nombre</h5></label>
                                    <input type="text" class="form-control" id="name" name="name" [(ngModel)]="usr.name">
                                </li>
                                <li class="list-group-item">
                                    <label for="titulo"><h5>Apellidos</h5></label>
                                    <input type="text" class="form-control" id="surname" name="surname" [(ngModel)]="usr.surname">
                                </li>
                                <li class="list-group-item">
                                    <label for="titulo"><h5>Calle</h5></label>
                                    <input type="text" class="form-control" id="street" name="street" [(ngModel)]="usr.street">
                                </li>
                                <li class="list-group-item">
                                    <label for="titulo"><h5>Número</h5></label>
                                    <input type="text" class="form-control" id="number" name="number" [(ngModel)]="usr.number">

                                </li>
                                <li class="list-group-item">
                                    <label for="titulo"><h5>Código Postal</h5></label>
                                    <input type="text" class="form-control" id="cp" name="cp" [(ngModel)]="usr.cp">
                                </li>
                                <li class="list-group-item">
                                    <label for="titulo"><h5>Población</h5></label>
                                    <input type="text" class="form-control" id="town" name="town" [(ngModel)]="usr.town">
                                </li>
                                <li class="list-group-item">
                                    <label for="titulo"><h5>Provincia</h5></label>
                                    <input type="text" class="form-control" id="province" name="province" [(ngModel)]="usr.province">
                                </li>
                                <li class="list-group-item">
                                    <label for="titulo"><h5>País</h5></label>
                                    <input type="text" class="form-control" id="state" name="state" [(ngModel)]="usr.state">
                                </li>
                                <li class="list-group-item">
                                    <label for="titulo"><h5>Teléfono</h5></label>
                                    <input type="text" class="form-control" id="phone" name="phone" [(ngModel)]="usr.phone">
                                </li>
                            </ul>

                            <input type="submit" value="Modificar" class="btn btn-primary btn-block">

                        </form>

                    </div>
                </div>
            </div>
        </div>
    </div>
</section>

<div class="container">
    <router-outlet></router-outlet>
</div>